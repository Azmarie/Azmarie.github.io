{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2014-09-25-ember-js-and-html5-drag-and-drop/","result":{"data":{"site":{"siteMetadata":{"title":"no.lol","author":"Azmarie Wang"}},"markdownRemark":{"id":"792eb839-b0b9-53d1-b9fd-fb89fe9a62ab","excerpt":"It’s fairly trivial to add a ‘drag and drop’ interface to Ember.js with html5, without the need for external libraries, although the caveat is that mobile…","html":"<p>It’s fairly trivial to add a ‘drag and drop’ interface to Ember.js with <a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Drag_and_drop\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">html</a>5, without the need for external libraries, although the caveat is that mobile browsers don’t (yet) <a href=\"http://caniuse.com/#feat=dragndrop\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">support</a> html5 drag and drop.</p>\n<p>The basic premise is to create 2 components:</p>\n<ul>\n<li>a <code class=\"language-text\">draggable-dropzone</code> component, that handles when an item is dropped into it (e.g. a shopping cart)</li>\n<li>a <code class=\"language-text\">draggable-item</code> component, that sets up the data transfer into the dropzone</li>\n</ul>\n<p>Using <a href=\"http://en.wikipedia.org/wiki/Transclusion\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">transclusion</a>, we can then easily add our ‘drag and drop’ functionality into our Ember application with different UI.</p>\n<h3 id=\"demo-with-extra-bells-and-whistles\" style=\"position:relative;\"><a href=\"#demo-with-extra-bells-and-whistles\" aria-label=\"demo with extra bells and whistles permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>demo (with extra bells and whistles)</h3>\n<p>Code: <a href=\"http://jsbin.com/denep/9/edit?js,output\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JSBin demo</a></p>\n<div style='position:relative; padding-bottom:calc(31.10% + 44px)'><iframe src='https://gfycat.com/ifr/HarmfulQuarterlyBobwhite' frameborder='0' scrolling='no' width='100%' height='100%' style='position:absolute;top:0;left:0;' allowfullscreen></iframe></div><p> <a href=\"https://gfycat.com/harmfulquarterlybobwhite\">via Gfycat</a></p>\n<h3 id=\"draggable-dropzone\" style=\"position:relative;\"><a href=\"#draggable-dropzone\" aria-label=\"draggable dropzone permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>draggable-dropzone</h3>\n<p>Let’s first define our <code class=\"language-text\">draggable-dropzone</code> component:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Ember <span class=\"token keyword\">from</span> <span class=\"token string\">'ember'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span> set <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> Ember<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Ember<span class=\"token punctuation\">.</span>Component<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  classNames        <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">'draggableDropzone'</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  classNameBindings <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">'dragClass'</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  dragClass         <span class=\"token operator\">:</span> <span class=\"token string\">'deactivated'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">dragLeave</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dragClass'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'deactivated'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">dragOver</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dragClass'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'activated'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">drop</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> data <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text/data'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">sendAction</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dropped'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dragClass'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'deactivated'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"handlebars\"><pre class=\"language-handlebars\"><code class=\"language-handlebars\"><span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">yield</span><span class=\"token delimiter punctuation\">}}</span></span></code></pre></div>\n<p>Ember includes <a href=\"http://emberjs.com/api/classes/Ember.View.html#toc_event-names\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">built-in events</a> for the html5 drag and drop API, so we can make use of them right out of the box. We also set up a <code class=\"language-text\">classNamebinding</code> to provide visual cues to our user that the element is a dropzone for dragging things into.</p>\n<h3 id=\"draggable-item\" style=\"position:relative;\"><a href=\"#draggable-item\" aria-label=\"draggable item permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>draggable-item</h3>\n<p>Next, we define the component for setting up items to be draggable:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Ember <span class=\"token keyword\">from</span> <span class=\"token string\">'ember'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span> get <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> Ember<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Ember<span class=\"token punctuation\">.</span>Component<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  classNames        <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">'draggableItem'</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  attributeBindings <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">'draggable'</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  draggable         <span class=\"token operator\">:</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">dragStart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text/data'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'content'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"handlebars\"><pre class=\"language-handlebars\"><code class=\"language-handlebars\"><span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">yield</span><span class=\"token delimiter punctuation\">}}</span></span></code></pre></div>\n<p><code class=\"language-text\">draggable</code> is, as you’d expect, the attribute that makes a DOM node draggable. We simply set the attribute of the component, and handle the <code class=\"language-text\">dragStart</code> event to get the content of the component. Unfortunately, the HTML5 API does not allow for draggables to transfer JavaScript, so we’ll have to perform a workaround.</p>\n<h3 id=\"using-the-components-in-our-application\" style=\"position:relative;\"><a href=\"#using-the-components-in-our-application\" aria-label=\"using the components in our application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using the components in our application</h3>\n<p>One thing to note is that we can’t transfer actual objects or records through the API, so when we include the component into our template, we have to set its content to the record’s ID.</p>\n<p>Here’s a simple example of an interface for adding users to a new ‘team’ record we want to save:</p>\n<div class=\"gatsby-highlight\" data-language=\"handlebars\"><pre class=\"language-handlebars\"><code class=\"language-handlebars\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selected-users<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">#draggable-dropzone</span> <span class=\"token variable\">dropped</span><span class=\"token punctuation\">=</span><span class=\"token string\">\"addUser\"</span><span class=\"token delimiter punctuation\">}}</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selected-users-list<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">#each</span> <span class=\"token variable\">user</span> <span class=\"token variable\">in</span> <span class=\"token variable\">selectedUsers</span><span class=\"token delimiter punctuation\">}}</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">user</span><span class=\"token punctuation\">.</span><span class=\"token variable\">fullName</span><span class=\"token delimiter punctuation\">}}</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">/each</span><span class=\"token delimiter punctuation\">}}</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">/draggable-dropzone</span><span class=\"token delimiter punctuation\">}}</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>available-users<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">#each</span> <span class=\"token variable\">user</span> <span class=\"token variable\">in</span> <span class=\"token variable\">users</span><span class=\"token delimiter punctuation\">}}</span></span>\n    <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">#draggable-item</span> <span class=\"token variable\">content</span><span class=\"token punctuation\">=</span><span class=\"token variable\">user</span><span class=\"token punctuation\">.</span><span class=\"token variable\">id</span><span class=\"token delimiter punctuation\">}}</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">user</span><span class=\"token punctuation\">.</span><span class=\"token variable\">fullName</span><span class=\"token delimiter punctuation\">}}</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">/draggable-item</span><span class=\"token delimiter punctuation\">}}</span></span>\n  <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">/each</span><span class=\"token delimiter punctuation\">}}</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>If you recall, we sent an action on <code class=\"language-text\">drop</code> in the <code class=\"language-text\">draggable-dropzone</code> component:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">drop</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">sendAction</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dropped'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now we simply need to define an appropriate action on our controller to handle the drag and drop:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Ember <span class=\"token keyword\">from</span> <span class=\"token string\">'ember'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span> computed<span class=\"token punctuation\">,</span> get <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> Ember<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Ember<span class=\"token punctuation\">.</span>ArrayController<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selectedUsers        <span class=\"token operator\">:</span> Ember<span class=\"token punctuation\">.</span><span class=\"token constant\">A</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  remainingUsers       <span class=\"token operator\">:</span> computed<span class=\"token punctuation\">.</span><span class=\"token function\">setDiff</span><span class=\"token punctuation\">(</span><span class=\"token string\">'model'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'selectedUsers'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  remainingUsersLength <span class=\"token operator\">:</span> computed<span class=\"token punctuation\">.</span><span class=\"token function\">alias</span><span class=\"token punctuation\">(</span><span class=\"token string\">'remainingUsers.length'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n  actions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">addUser</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">userId</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> selectedUsers <span class=\"token operator\">=</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'selectedUsers'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">var</span> user          <span class=\"token operator\">=</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'model'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">findBy</span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>selectedUsers<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> selectedUsers<span class=\"token punctuation\">.</span><span class=\"token function\">pushObject</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token function\">addAllUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> remainingUsers <span class=\"token operator\">=</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'remainingUsers'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'selectedUsers'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pushObjects</span><span class=\"token punctuation\">(</span>remainingUsers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token function\">removeUser</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'selectedUsers'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">removeObject</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token function\">removeAllUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'selectedUsers'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In our Controller, we simply find the appropriate user record from the store (using the <code class=\"language-text\">userId</code> we get from the <code class=\"language-text\">draggable-item</code> component), and then push it into an array called <code class=\"language-text\">selectedUsers</code>. We can then do whatever we want with this array (e.g. create a new team with the selected users).</p>\n<p>Some basic styling:</p>\n<div class=\"gatsby-highlight\" data-language=\"scss\"><pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token property\"><span class=\"token variable\">$default-margin</span></span> <span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n<span class=\"token property\"><span class=\"token variable\">$gray-light</span></span>     <span class=\"token punctuation\">:</span> #e1e1e1<span class=\"token punctuation\">;</span>\n<span class=\"token property\"><span class=\"token variable\">$gray-medium</span></span>    <span class=\"token punctuation\">:</span> #aaa<span class=\"token punctuation\">;</span>\n<span class=\"token property\"><span class=\"token variable\">$green</span></span>          <span class=\"token punctuation\">:</span> #2ecc71<span class=\"token punctuation\">;</span>\n<span class=\"token property\"><span class=\"token variable\">$white</span></span>          <span class=\"token punctuation\">:</span> #fff<span class=\"token punctuation\">;</span>\n<span class=\"token property\"><span class=\"token variable\">$black</span></span>          <span class=\"token punctuation\">:</span> #111<span class=\"token punctuation\">;</span>\n\n<span class=\"token selector\">.draggableDropzone </span><span class=\"token punctuation\">{</span>\n   <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">;</span>\n   <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 3px dashed <span class=\"token variable\">$gray-medium</span><span class=\"token punctuation\">;</span>\n   <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$default-margin</span> <span class=\"token operator\">/</span> 2<span class=\"token punctuation\">;</span>\n   <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n   <span class=\"token property\">min-height</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$default-margin</span> <span class=\"token operator\">*</span> 2.5<span class=\"token punctuation\">;</span>\n   <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$gray-medium</span><span class=\"token punctuation\">;</span>\n   <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$default-margin</span> <span class=\"token operator\">/</span> 2<span class=\"token punctuation\">;</span>\n   <span class=\"token selector\"><span class=\"token parent important\">&amp;</span>.activated </span><span class=\"token punctuation\">{</span>\n     <span class=\"token property\">border-color</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$green</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n   <span class=\"token selector\"><span class=\"token parent important\">&amp;</span>.deactivated </span><span class=\"token punctuation\">{</span>\n     <span class=\"token property\">border-color</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$gray-light</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.draggableItem[draggable=true] </span><span class=\"token punctuation\">{</span>\n   <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> inline-block<span class=\"token punctuation\">;</span>\n   <span class=\"token property\">min-width</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$default-margin</span><span class=\"token punctuation\">;</span>\n   <span class=\"token property\">min-height</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$default-margin</span><span class=\"token punctuation\">;</span>\n   <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$gray-light</span><span class=\"token punctuation\">;</span>\n   <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$default-margin</span> <span class=\"token operator\">/</span> 4 <span class=\"token variable\">$default-margin</span> <span class=\"token operator\">/</span> 2<span class=\"token punctuation\">;</span>\n   <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$default-margin</span> <span class=\"token operator\">/</span> 4<span class=\"token punctuation\">;</span>\n   <span class=\"token property\">-moz-user-select</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n   <span class=\"token property\">-khtml-user-drag</span><span class=\"token punctuation\">:</span> element<span class=\"token punctuation\">;</span>\n   <span class=\"token property\">cursor</span><span class=\"token punctuation\">:</span> move<span class=\"token punctuation\">;</span>\n   <span class=\"token selector\"><span class=\"token parent important\">&amp;</span>:hover </span><span class=\"token punctuation\">{</span>\n     <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$gray-medium</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Over at <a href=\"http://www.doceo.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">doceo</a>, we’ve added more functionality to the interface, including typeahead search, and other useful controls (add all users, removing all users, removing a single user). This basic setup is sufficient enough to handle most use cases for a drag and drop UI, and having transclusion (yield) lets us define different designs for the same drag and drop functionality.</p>\n<p>Special thanks to <a href=\"https://twitter.com/itscatkins\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">@itscatkins</a> for pairing with me for this one.</p>","timeToRead":4,"fields":{"slug":"/2014-09-25-ember-js-and-html5-drag-and-drop/"},"frontmatter":{"title":"Ember.js and HTML5 Drag and Drop","shortDate":"September 25, 2014","longDate":"September 25, 2014, 2:38:31 am","description":"It’s fairly trivial to add a ‘drag and drop’ interface to Ember.js with html5, without the need for external libraries, although…","categories":["engineering"],"cover":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHeq1ZvQID/xAAaEAACAwEBAAAAAAAAAAAAAAABEQACAyEj/9oACAEBAAEFArCIHR8sUMa+iE//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAACAwEAAAAAAAAAAAAAAAAQIQABMUH/2gAIAQEABj8CrkWFj//EABoQAQEBAAMBAAAAAAAAAAAAAAERACExUcH/2gAIAQEAAT8heh5e4uIY6uFF7nuVrz8w9ioU1uSm/9oADAMBAAIAAwAAABDfH//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQMBAT8QVhh//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EGV//8QAHBABAAICAwEAAAAAAAAAAAAAAQARIUExUWGh/9oACAEBAAE/EAMIC04fICD2B+AgBqjJIY1VAyZ6JA7iTV4iukHRP//Z","aspectRatio":1.3953488372093024,"src":"/static/db652c4514bf0b9840f03ecfcd380ee6/7f945/rawpixel-191157-unsplash-optimized.jpg","srcSet":"/static/db652c4514bf0b9840f03ecfcd380ee6/e2788/rawpixel-191157-unsplash-optimized.jpg 360w,\n/static/db652c4514bf0b9840f03ecfcd380ee6/7d509/rawpixel-191157-unsplash-optimized.jpg 720w,\n/static/db652c4514bf0b9840f03ecfcd380ee6/7f945/rawpixel-191157-unsplash-optimized.jpg 1440w,\n/static/db652c4514bf0b9840f03ecfcd380ee6/47dad/rawpixel-191157-unsplash-optimized.jpg 2160w,\n/static/db652c4514bf0b9840f03ecfcd380ee6/af56c/rawpixel-191157-unsplash-optimized.jpg 2880w,\n/static/db652c4514bf0b9840f03ecfcd380ee6/b5537/rawpixel-191157-unsplash-optimized.jpg 6524w","sizes":"(max-width: 1440px) 100vw, 1440px"}}},"coverAuthor":"rawpixel","coverOriginalUrl":"https://unsplash.com/photos/C05KN4h8WKw?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText","keywords":["emberjs","drag and drop","html5"],"published":true}}},"pageContext":{"slug":"/2014-09-25-ember-js-and-html5-drag-and-drop/","previous":null,"next":{"fields":{"slug":"/2014-11-13-using-highcharts-js-in-an-ember-app/"},"frontmatter":{"title":"Using Highcharts.js in an Ember app"}}}},"staticQueryHashes":["3009088689","63159454"]}