{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2014-12-22-submit-an-ember-textarea-with-command-or-ctrl-enter/","result":{"data":{"site":{"siteMetadata":{"title":"no.lol","author":"Azmarie Wang"}},"markdownRemark":{"id":"b1716427-21c2-5ecd-b5f6-71608de44654","excerpt":"It’s Christmas in a few days, so I only have time for a short post this week. You might have an Ember TextArea in your app somewhere, perhaps as a comment form…","html":"<p>It’s Christmas in a few days, so I only have time for a short post this week.</p>\n<p>You might have an <a href=\"http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_textarea\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ember TextArea</a> in your app somewhere, perhaps as a comment form or some other input, for submitting multi-line strings (e.g. formatted with <a href=\"https://help.github.com/articles/github-flavored-markdown/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Markdown</a>) to some API. If you’ve ever commented on a Github issue or pull request, you’ll notice that the form doesn’t submit if you hit enter while it’s in focus. Instead, it only submits when you hit ctrl or ⌘ + enter.</p>\n<p>In this post, we’ll explore the few lines of code we need to extend the default Ember TextArea to do just that.</p>\n<p><a href=\"http://jsbin.com/susipe/9/embed?html,js,output\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JS Bin Demo</a></p>\n<h3 id=\"reopening-embertextarea\" style=\"position:relative;\"><a href=\"#reopening-embertextarea\" aria-label=\"reopening embertextarea permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reopening Ember.TextArea</h3>\n<p>Ember makes it really easy to <a href=\"http://emberjs.com/guides/object-model/reopening-classes-and-instances/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">reopen</a> classes so that we can add new methods and properties, or modify existing ones. It’s analogous to adding methods to some prototype instead of adding them to each and every instance of that class. Generally speaking, <code class=\"language-text\">reopenClass</code> adds methods to the class itself, while <code class=\"language-text\">reopen</code> adds methods to instances of that class.</p>\n<blockquote>\n<p><em>‘reopen’ is used to add instance methods and properties that are shared across all instances of a class.</em></p>\n</blockquote>\n<p>For example, if you wanted your Ember app to use the browser’s history API instead of a hashchange event, you would have to reopen the Router, and set it’s location key/value to ‘history’:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">App<span class=\"token punctuation\">.</span>Router<span class=\"token punctuation\">.</span><span class=\"token function\">reopen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  location<span class=\"token operator\">:</span> <span class=\"token string\">'history'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In our case, we’re reopening <code class=\"language-text\">Ember.Textarea</code>, and modifying the default event <code class=\"language-text\">keyDown</code> to check if the event has the right keycode and modifier key (<code class=\"language-text\">_isValidCombination</code>). If it is, the TextArea (which extends Ember.Component — it’s just a special kind of component) sends an action we named <code class=\"language-text\">modifiedSubmit</code>. Then in our template, we just need to bind that action name to some controller action to handle it and we’re done!</p>\n<div class=\"gatsby-highlight\" data-language=\"handlebars\"><pre class=\"language-handlebars\"><code class=\"language-handlebars\"><span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">textarea</span> <span class=\"token variable\">modifiedSubmit</span><span class=\"token punctuation\">=</span><span class=\"token string\">\"someControllerAction\"</span> <span class=\"token variable\">value</span><span class=\"token punctuation\">=</span><span class=\"token variable\">someText</span><span class=\"token delimiter punctuation\">}}</span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Ember<span class=\"token punctuation\">.</span>TextArea<span class=\"token punctuation\">.</span><span class=\"token function\">reopen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">keyDown</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_isValidCombination</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">sendAction</span><span class=\"token punctuation\">(</span><span class=\"token string\">'modifiedSubmit'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">_hasCorrectModifier</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> event<span class=\"token punctuation\">.</span>ctrlKey <span class=\"token operator\">||</span> event<span class=\"token punctuation\">.</span>metaKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">_isCorrectKeyCode</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">keyCode</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> keyCode <span class=\"token operator\">===</span> <span class=\"token number\">13</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">_isValidCombination</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_hasCorrectModifier</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_isCorrectKeyCode</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>keyCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"reopening-and-extending-other-classes-to-keep-things-dry\" style=\"position:relative;\"><a href=\"#reopening-and-extending-other-classes-to-keep-things-dry\" aria-label=\"reopening and extending other classes to keep things dry permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reopening and Extending Other Classes to Keep Things DRY</h3>\n<p>As you can see, it’s really easy to reopen and add or overwrite existing methods on Ember classes. It’s a powerful concept that can also be easily abused, so have a read of the Ember guides about the <a href=\"http://emberjs.com/guides/object-model/classes-and-instances/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ember object model</a> to get a sense of how it all works. Many classes in Ember inherit from <a href=\"http://emberjs.com/api/classes/Ember.Object.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ember.Object</a> as a base, so knowing about the object model will be useful in getting a better understanding of how Ember works.</p>\n<h4 id=\"emberobjectextend\" style=\"position:relative;\"><a href=\"#emberobjectextend\" aria-label=\"emberobjectextend permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ember.Object#extend</h4>\n<p>This method extends a sub-class from some Ember Object. For example, you might have noticed that all your controllers extend Ember.Controller/ObjectController/ArrayController:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Ember<span class=\"token punctuation\">.</span>Controller<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>That means we can also create our own controllers and other objects that can then be used as a new base class:</p>\n<div class=\"gatsby-code-title\">base.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Ember<span class=\"token punctuation\">.</span>Controller<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  someComputed<span class=\"token operator\">:</span> Ember<span class=\"token punctuation\">.</span><span class=\"token function\">computed</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'foo'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Then:</p>\n<div class=\"gatsby-code-title\">other.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> BaseController <span class=\"token keyword\">from</span> <span class=\"token string\">'base'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> BaseController<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span> <span class=\"token comment\">// some other classes that need the 'someComputed' property</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now all classes that extend from ‘BaseController’ will automatically inherit the <code class=\"language-text\">someComputed</code> computed property, and you don’t have to define it a million times, keeping your code DRY. You can extend pretty much anything: computed properties, actions, and even lifecycle hooks.</p>\n<p>This doesn’t just apply to controllers — you can do the same for models, components, views, routes… Basically anything that extends Ember.Object.</p>\n<h3 id=\"merry-christmas-and-thanks-for-reading\" style=\"position:relative;\"><a href=\"#merry-christmas-and-thanks-for-reading\" aria-label=\"merry christmas and thanks for reading permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Merry Christmas and Thanks for Reading!</h3>\n<p>I hope you’ve enjoyed reading this little blog post!</p>\n<h4 id=\"what-ive-been-up-to\" style=\"position:relative;\"><a href=\"#what-ive-been-up-to\" aria-label=\"what ive been up to permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What I’ve been up to</h4>\n<p>Over the next few weeks and months, I’ll be working on improving the <a href=\"http://emberjs.com/guides/getting-started/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ember Getting Started Guide</a> (GSG) alongside the Ember documentation strike team. We’re aware that Ember’s documentation isn’t as strong as we’d like, so we’ll be taking this opportunity to redesign and rewrite it from the ground up to ensure Ember’s on-boarding story for new developers is best in class in the run up to 2.0.</p>\n<p>If you have any suggestions, ideas or feedback for the new GSG, please <a href=\"https://twitter.com/sugarpirate_\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">tweet me</a>! Anything, no matter how small or insignificant, will be helpful. If you like my writing, I hope I’ll be able to inject a little bit of <em>sugarpirate</em> goodness into the GSG, and if you don’t, please let me know ☺</p>\n<p>See you in the new year! — <em>Lauren</em></p>","timeToRead":4,"fields":{"slug":"/2014-12-22-submit-an-ember-textarea-with-command-or-ctrl-enter/"},"frontmatter":{"title":"Submit an Ember TextArea with Command or Ctrl + Enter","shortDate":"December 22, 2014","longDate":"December 22, 2014, 12:17:33 pm","description":"You might have an Ember TextArea in your app somewhere, perhaps as a comment form or some other input, for submitting multi-line strings…","categories":["engineering"],"cover":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAACBf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB4aDra3Dq/8QAGRABAAIDAAAAAAAAAAAAAAAAAgABEBIh/9oACAEBAAEFAoDLwVqEu//EABYRAQEBAAAAAAAAAAAAAAAAAAACEf/aAAgBAwEBPwGWv//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/AVf/xAAXEAEAAwAAAAAAAAAAAAAAAAAQABEh/9oACAEBAAY/Apbh/8QAGBABAAMBAAAAAAAAAAAAAAAAAQARITH/2gAIAQEAAT8hlwouuR07UYooO1uxFrqz/9oADAMBAAIAAwAAABB4/wD/xAAXEQADAQAAAAAAAAAAAAAAAAAAESEB/9oACAEDAQE/EEdNs//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/ECP/xAAaEAEAAgMBAAAAAAAAAAAAAAABABEhMUFR/9oACAEBAAE/EDQd7LIALHrMOw1dMGbniXB2q7J1zCrP/9k=","aspectRatio":1.5,"src":"/static/3c99691be302851bf2a899fceb22b119/7f945/pawel-czerwinski-1404603-unsplash-optimized.jpg","srcSet":"/static/3c99691be302851bf2a899fceb22b119/e2788/pawel-czerwinski-1404603-unsplash-optimized.jpg 360w,\n/static/3c99691be302851bf2a899fceb22b119/7d509/pawel-czerwinski-1404603-unsplash-optimized.jpg 720w,\n/static/3c99691be302851bf2a899fceb22b119/7f945/pawel-czerwinski-1404603-unsplash-optimized.jpg 1440w,\n/static/3c99691be302851bf2a899fceb22b119/47dad/pawel-czerwinski-1404603-unsplash-optimized.jpg 2160w,\n/static/3c99691be302851bf2a899fceb22b119/af56c/pawel-czerwinski-1404603-unsplash-optimized.jpg 2880w,\n/static/3c99691be302851bf2a899fceb22b119/f4ff0/pawel-czerwinski-1404603-unsplash-optimized.jpg 5664w","sizes":"(max-width: 1440px) 100vw, 1440px"}}},"coverAuthor":"Paweł Czerwiński","coverOriginalUrl":"https://unsplash.com/photos/1aMG_ShZCYg?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText","keywords":["emberjs","keyboard"],"published":true}}},"pageContext":{"slug":"/2014-12-22-submit-an-ember-textarea-with-command-or-ctrl-enter/","previous":{"fields":{"slug":"/2014-12-14-lazy-loading-videos-in-ember/"},"frontmatter":{"title":"Lazy Loading Videos in Ember"}},"next":{"fields":{"slug":"/2014-12-28-my-2014-in-review-or-how-i-beat-impostor-syndrome/"},"frontmatter":{"title":"My 2014 in Review — Or How I Beat Impostor Syndrome"}}}},"staticQueryHashes":["3009088689","63159454"]}