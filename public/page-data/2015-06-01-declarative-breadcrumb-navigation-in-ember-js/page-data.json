{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2015-06-01-declarative-breadcrumb-navigation-in-ember-js/","result":{"data":{"site":{"siteMetadata":{"title":"no.lol","author":"Azmarie Wang"}},"markdownRemark":{"id":"3506a288-8ba1-586c-a3f9-db29d2795aac","excerpt":"Breadcrumb navigation isn’t a new concept, in fact, it’s usefulness has been endlessly debated about by UX designers all over. Today, I won’t get into the nitty…","html":"<p><a href=\"http://www.nngroup.com/articles/breadcrumb-navigation-useful/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Breadcrumb navigation</a> isn’t a new concept, in fact, it’s usefulness has been endlessly debated about by UX designers all over. Today, I won’t get into the nitty gritty on whether or not your app should include one, but I’d like to share an <a href=\"https://github.com/poteto/ember-crumbly\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">addon</a> I built for a project I’m working on that required it.</p>\n<p>This is a simple Component that is placed once in your application, and then generates a dynamic breadcrumb by looking up the current route hierarchy. The addon has a simple declarative API, which makes integration with your app super easy.</p>\n<p>Let’s dive in!</p>\n<p>I will steal your croissant and eat it. Does anyone even read this caption?</p>\n<h3 id=\"demo--source\" style=\"position:relative;\"><a href=\"#demo--source\" aria-label=\"demo  source permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Demo &#x26; Source</h3>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*hWdrtZ948cmcQyeA0OyKiw.png\"></p>\n<p>One True God</p>\n<p>You can take a look at the <a href=\"http://development.ember-crumbly-demo.divshot.io\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">demo app</a> to see ember-crumbly in action. What’s cool about it is how little code it takes to add dynamic breadcrumbs to your app, and how declarative it is. The source is on GitHub, as always.</p>\n<h3 id=\"the-idea\" style=\"position:relative;\"><a href=\"#the-idea\" aria-label=\"the idea permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The idea</h3>\n<p>We work on many Ember apps at <a href=\"https://dockyard.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">DockYard</a>, and one particular client’s project I was working on called for a very dynamic breadcrumb type UI that would respond to changes in the route and model. Before I started actually implementing it, I sketched my plan on paper to see if I could make it nice and declarative instead of manually setting the breadcrumb on each of those route templates.</p>\n<h4 id=\"the-ember-container-and-currentroutename\" style=\"position:relative;\"><a href=\"#the-ember-container-and-currentroutename\" aria-label=\"the ember container and currentroutename permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Ember Container and currentRouteName</h4>\n<p>The Component relies mainly on Ember’s container and the current route name. On a high level, the Component is injected with the Application Controller’s <code class=\"language-text\">currentRouteName</code> prop, then looks up the appropriate route in the Container to check if it has a <code class=\"language-text\">breadCrumb</code> prop defined. If it does, we display whatever the POJO is, or else we show its route name in the Component.</p>\n<h3 id=\"intended-usage\" style=\"position:relative;\"><a href=\"#intended-usage\" aria-label=\"intended usage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Intended usage</h3>\n<p>The goal was to have an API as declarative as the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"handlebars\"><pre class=\"language-handlebars\"><code class=\"language-handlebars\"><span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">bread-crumbs</span> <span class=\"token variable\">linkable</span><span class=\"token punctuation\">=</span><span class=\"token boolean\">true</span> <span class=\"token variable\">outputStyle</span><span class=\"token punctuation\">=</span><span class=\"token string\">\"foundation\"</span><span class=\"token delimiter punctuation\">}}</span></span></code></pre></div>\n<p>And the route:</p>\n<div class=\"gatsby-code-title\">foo/route.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Ember<span class=\"token punctuation\">.</span>Route<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  breadCrumb<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    title<span class=\"token operator\">:</span> <span class=\"token string\">'Animals'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>We wanted to be able to pass in our own template block too:</p>\n<div class=\"gatsby-highlight\" data-language=\"handlebars\"><pre class=\"language-handlebars\"><code class=\"language-handlebars\"><span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">#bread-crumbs</span> <span class=\"token variable\">linkable</span><span class=\"token punctuation\">=</span><span class=\"token boolean\">true</span> <span class=\"token variable\">as</span> <span class=\"token punctuation\">|</span><span class=\"token variable\">component</span> <span class=\"token variable\">route</span><span class=\"token punctuation\">|</span><span class=\"token delimiter punctuation\">}}</span></span>\n  <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">#if</span> <span class=\"token variable\">route</span><span class=\"token punctuation\">.</span><span class=\"token variable\">title</span><span class=\"token delimiter punctuation\">}}</span></span>\n    <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">route</span><span class=\"token punctuation\">.</span><span class=\"token variable\">title</span><span class=\"token delimiter punctuation\">}}</span></span>\n  <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">else</span><span class=\"token delimiter punctuation\">}}</span></span>\n    <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">route</span><span class=\"token punctuation\">.</span><span class=\"token variable\">foo</span><span class=\"token delimiter punctuation\">}}</span></span> (<span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">route</span><span class=\"token punctuation\">.</span><span class=\"token variable\">bar</span><span class=\"token delimiter punctuation\">}}</span></span>) ... <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">route</span><span class=\"token punctuation\">.</span><span class=\"token variable\">baz</span><span class=\"token delimiter punctuation\">}}</span></span>\n  <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">/if</span><span class=\"token delimiter punctuation\">}}</span></span>\n<span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">/bread-crumbs</span><span class=\"token delimiter punctuation\">}}</span></span></code></pre></div>\n<p>Let’s see how we can write a component that does just that using some of Ember’s new features.</p>\n<h3 id=\"injecting-the-application-controller\" style=\"position:relative;\"><a href=\"#injecting-the-application-controller\" aria-label=\"injecting the application controller permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Injecting the Application Controller</h3>\n<p>I’ve explained how we inject things in other posts, so I won’t go into detail for the initializer. Ember adds the <a href=\"http://guides.emberjs.com/v1.10.0/understanding-ember/debugging/#toc_get-current-route-name-path\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">currentRouteName and currentPath to the Application Controller</a>, so we’ll inject it into our Component so we can extract it.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">container<span class=\"token punctuation\">,</span> application</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  application<span class=\"token punctuation\">.</span><span class=\"token function\">inject</span><span class=\"token punctuation\">(</span><span class=\"token string\">'component:bread-crumbs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'applicationController'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'controller:application'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'crumbly'</span><span class=\"token punctuation\">,</span>\n  initialize\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"declaring-your-variables\" style=\"position:relative;\"><a href=\"#declaring-your-variables\" aria-label=\"declaring your variables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Declaring your variables</h3>\n<p>We typically declare our variables and functions used at the top of each file, to make code easier to read and refactor in the future. For ember-crumbly’s <code class=\"language-text\">bread-crumbs</code> component, we’re using the usual suspects:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Ember <span class=\"token keyword\">from</span> <span class=\"token string\">'ember'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> layout <span class=\"token keyword\">from</span> <span class=\"token string\">'../templates/components/bread-crumbs'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> get <span class=\"token operator\">=</span> Ember<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">A</span><span class=\"token operator\">:</span> emberArray<span class=\"token punctuation\">,</span>\n  EnumerableUtils<span class=\"token punctuation\">,</span>\n  Component<span class=\"token punctuation\">,</span>\n  Logger<span class=\"token punctuation\">,</span>\n  computed<span class=\"token punctuation\">,</span>\n  getWithDefault<span class=\"token punctuation\">,</span>\n  assert<span class=\"token punctuation\">,</span>\n  typeOf<span class=\"token punctuation\">,</span>\n  setProperties\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> Ember<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n  classify\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> Ember<span class=\"token punctuation\">.</span>String<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n  map<span class=\"token punctuation\">,</span>\n  filter\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> EnumerableUtils<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n  warn\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> Logger<span class=\"token punctuation\">;</span></code></pre></div>\n<p>You might be wondering why we declare <code class=\"language-text\">const get = Ember.get;</code> by itself on line 4 — currently there are issues with destructuring <code class=\"language-text\">{ get }</code> and <a href=\"https://github.com/dockyard/ember-suave/issues/5\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">bugs in Esprima</a>, so we do it by itself as temporary workaround.</p>\n<h3 id=\"component-props\" style=\"position:relative;\"><a href=\"#component-props\" aria-label=\"component props permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Component props</h3>\n<p>Here we set a bunch of default props for the component.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Component<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  layout<span class=\"token punctuation\">,</span>\n  tagName<span class=\"token operator\">:</span> <span class=\"token string\">'ol'</span><span class=\"token punctuation\">,</span>\n  linkable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  reverse<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  classNameBindings<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">'breadCrumbClass'</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  hasBlock<span class=\"token operator\">:</span> computed<span class=\"token punctuation\">.</span><span class=\"token function\">bool</span><span class=\"token punctuation\">(</span><span class=\"token string\">'template'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">readOnly</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  currentRouteName<span class=\"token operator\">:</span> computed<span class=\"token punctuation\">.</span><span class=\"token function\">readOnly</span><span class=\"token punctuation\">(</span><span class=\"token string\">'applicationController.currentRouteName'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>We’ve injected the Application Controller into the component in our initializer, so getting the current route’s name is as simple as setting a computed property macro. We make it <a href=\"http://emberjs.com/api/classes/Ember.ComputedProperty.html#method_readOnly\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">readOnly</code></a> so we don’t set it by accident.</p>\n<h3 id=\"computing-the-route-hierarchy\" style=\"position:relative;\"><a href=\"#computing-the-route-hierarchy\" aria-label=\"computing the route hierarchy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Computing the route hierarchy</h3>\n<p>Ember’s <code class=\"language-text\">currentRouteName</code> prop returns the current route hierarchy separated by periods. For example, if you were on <code class=\"language-text\">/foo/bar/baz</code>, your route would probably be something like <code class=\"language-text\">foo.bar.baz.index</code>. Knowing this, the goal would be to split the string by the period, and then working out the route name for each of its parts. With the correct route name, we can then lookup the route on the container and extract the breadCrumb POJO we need for our bread-crumb.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  routeHierarchy<span class=\"token operator\">:</span> <span class=\"token function\">computed</span><span class=\"token punctuation\">(</span><span class=\"token string\">'currentRouteName'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'reverse'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> currentRouteName <span class=\"token operator\">=</span> <span class=\"token function\">getWithDefault</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'currentRouteName'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token function\">assert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[ember-crumbly] Could not find a curent route'</span><span class=\"token punctuation\">,</span> currentRouteName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">const</span> routeNames <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_splitCurrentRouteName</span><span class=\"token punctuation\">(</span>currentRouteName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> filteredRouteNames <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_filterIndexRoutes</span><span class=\"token punctuation\">(</span>routeNames<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">const</span> crumbs <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_lookupBreadCrumb</span><span class=\"token punctuation\">(</span>routeNames<span class=\"token punctuation\">,</span> filteredRouteNames<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'reverse'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> crumbs<span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> crumbs<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">warn</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[ember-crumbly] `routeHierarchy` is read only'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>You’ll notice straight away that we’re using new Ember computed property syntax here. The new syntax allows you to set both getters and setters on your CP, instead of checking argument length like you used to have to do.</p>\n<h3 id=\"figuring-out-the-route-name\" style=\"position:relative;\"><a href=\"#figuring-out-the-route-name\" aria-label=\"figuring out the route name permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Figuring out the route name</h3>\n<p>First, we split the <code class=\"language-text\">currentRouteName</code> string into an array, and then filter out any <code class=\"language-text\">index</code> routes. This is because the string splits into an array with all the parts, so foo/bar/baz would yield <code class=\"language-text\">[&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;, &#39;index&#39;]</code>, while we only want the first 3.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token function\">_splitCurrentRouteName</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">currentRouteName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> currentRouteName<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">_filterIndexRoutes</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">routeNames</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>routeNames<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> name <span class=\"token operator\">!==</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>Now with the array of parts, we need to piece them together again bit by bit to reconstruct their constituent routes.</p>\n<h3 id=\"looking-up-the-route-on-the-container\" style=\"position:relative;\"><a href=\"#looking-up-the-route-on-the-container\" aria-label=\"looking up the route on the container permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Looking up the route on the container</h3>\n<p>In here, we:</p>\n<ol>\n<li>Map over the filtered route names individually</li>\n<li>Reconstruct the route name by slicing the original array of route names with the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">right <code class=\"language-text\">end</code> argument</a></li>\n<li>Look the reconstructed route name up on the container</li>\n<li>Retrieve the breadCrumb POJO, add props to it, and return an Ember Array that our component can iterate over in its template</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token function\">_lookupBreadCrumb</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">routeNames<span class=\"token punctuation\">,</span> filteredRouteNames</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> defaultLinkable <span class=\"token operator\">=</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'linkable'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> breadCrumbs <span class=\"token operator\">=</span> <span class=\"token function\">map</span><span class=\"token punctuation\">(</span>filteredRouteNames<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_guessRoutePath</span><span class=\"token punctuation\">(</span>routeNames<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">let</span> breadCrumb <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_lookupRoute</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getWithDefault</span><span class=\"token punctuation\">(</span><span class=\"token string\">'breadCrumb'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> breadCrumbType <span class=\"token operator\">=</span> <span class=\"token function\">typeOf</span><span class=\"token punctuation\">(</span>breadCrumb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>breadCrumbType <span class=\"token operator\">===</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        breadCrumb <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n          path<span class=\"token punctuation\">,</span>\n          linkable<span class=\"token operator\">:</span> defaultLinkable<span class=\"token punctuation\">,</span>\n          title<span class=\"token operator\">:</span> <span class=\"token function\">classify</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>breadCrumbType <span class=\"token operator\">===</span> <span class=\"token string\">'null'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setProperties</span><span class=\"token punctuation\">(</span>breadCrumb<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n          path<span class=\"token punctuation\">,</span>\n          linkable<span class=\"token operator\">:</span> breadCrumb<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">'linkable'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> breadCrumb<span class=\"token punctuation\">.</span>linkable <span class=\"token operator\">:</span> defaultLinkable\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">return</span> breadCrumb<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token function\">emberArray</span><span class=\"token punctuation\">(</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>breadCrumbs<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">breadCrumb</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">typeOf</span><span class=\"token punctuation\">(</span>breadCrumb<span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"reconstructing-the-route-name\" style=\"position:relative;\"><a href=\"#reconstructing-the-route-name\" aria-label=\"reconstructing the route name permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reconstructing the route name</h4>\n<p>Each time map runs in the previous method, we get a single piece of the route name, e.g. <code class=\"language-text\">bar</code>. We know that its correct route name is <code class=\"language-text\">foo.bar</code>, so we can slice the original array with the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map#Syntax\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">map’s <code class=\"language-text\">index</code> argument</a> to piece those bits together. When we start with the first piece (<code class=\"language-text\">foo</code>), we know that we need to look up <code class=\"language-text\">foo.index</code> so that we can generate the correct link-to, so we check for that.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token function\">_guessRoutePath</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">routeNames<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> routes <span class=\"token operator\">=</span> routeNames<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>routes<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.index</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> routes<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>Now that we have the correct route name for each path, we can look up the actual route object on the Container while we map over the filtered route names.</p>\n<h4 id=\"looking-up-the-route-on-the-container-1\" style=\"position:relative;\"><a href=\"#looking-up-the-route-on-the-container-1\" aria-label=\"looking up the route on the container 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Looking up the route on the Container</h4>\n<p>The Ember Container (basically how Ember keeps track of all its different objects) isn’t well documented because it is originally intended to be private API. However, many addons and apps make use of it to do certain things, and this one is no exception. There is an <a href=\"https://github.com/emberjs/rfcs/pull/46\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">RFC on the table</a> with reforming the Registry and Container, so this might have to be changed in the future. For now, we can still get the Container from the Component, and then use its <code class=\"language-text\">lookup(&#39;type:name&#39;)</code> method to find the route.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token function\">_lookupRoute</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">routeName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> container <span class=\"token operator\">=</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'container'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> route <span class=\"token operator\">=</span> container<span class=\"token punctuation\">.</span><span class=\"token function\">lookup</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">route:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>routeName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">assert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[ember-crumbly] \\`route:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>routeName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\` was not found</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> route<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> route<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h4 id=\"extracting-the-breadcrumb-pojo\" style=\"position:relative;\"><a href=\"#extracting-the-breadcrumb-pojo\" aria-label=\"extracting the breadcrumb pojo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Extracting the breadCrumb POJO</h4>\n<p>With the route object in hand, we can then easily extract the breadCrumb POJO we define on our routes.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> breadCrumb <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_lookupRoute</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getWithDefault</span><span class=\"token punctuation\">(</span><span class=\"token string\">'breadCrumb'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> breadCrumbType <span class=\"token operator\">=</span> <span class=\"token function\">typeOf</span><span class=\"token punctuation\">(</span>breadCrumb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>breadCrumbType <span class=\"token operator\">===</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  breadCrumb <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    path<span class=\"token punctuation\">,</span>\n    linkable<span class=\"token operator\">:</span> defaultLinkable<span class=\"token punctuation\">,</span>\n    title<span class=\"token operator\">:</span> <span class=\"token function\">classify</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>breadCrumbType <span class=\"token operator\">===</span> <span class=\"token string\">'null'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setProperties</span><span class=\"token punctuation\">(</span>breadCrumb<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    path<span class=\"token punctuation\">,</span>\n    linkable<span class=\"token operator\">:</span> breadCrumb<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">'linkable'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> breadCrumb<span class=\"token punctuation\">.</span>linkable <span class=\"token operator\">:</span> defaultLinkable\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">return</span> breadCrumb<span class=\"token punctuation\">;</span></code></pre></div>\n<p>In certain scenarios, you might want to opt-out of displaying a specific route in the breadcrumb. We allow that by setting <code class=\"language-text\">breadCrumb: null</code> inside of that route. If no breadCrumb POJO is found, we set the title to be the route’s capitalized name by default, and if we do find one, we simply add the path and linkable keys to it.</p>\n<p>Finally, we return an <a href=\"http://emberjs.com/api/classes/Ember.html#method_A\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ember Array</a> so that the resulting array is iterable in the template, and filter out any undefined breadcrumbs.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">return</span> <span class=\"token function\">emberArray</span><span class=\"token punctuation\">(</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>breadCrumbs<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">breadCrumb</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">typeOf</span><span class=\"token punctuation\">(</span>breadCrumb<span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>With the logic done, let’s look at our somewhat complicated template to handle all the different uses!</p>\n<h3 id=\"yo-dawg-i-heard-you-like-conditional-logic-in-your-templates\" style=\"position:relative;\"><a href=\"#yo-dawg-i-heard-you-like-conditional-logic-in-your-templates\" aria-label=\"yo dawg i heard you like conditional logic in your templates permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Yo dawg, I heard you like conditional logic in your templates</h3>\n<p>Because we want to handle both the inline and block form of the Component, as well as the ability to make each route linkable, the template does get a little ugly. Fortunately, this is still manageable and is hidden from our consuming users, so that’s our problem.</p>\n<div class=\"gatsby-highlight\" data-language=\"handlebars\"><pre class=\"language-handlebars\"><code class=\"language-handlebars\"><span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">#each</span> <span class=\"token variable\">routeHierarchy</span> <span class=\"token variable\">as</span> <span class=\"token punctuation\">|</span><span class=\"token variable\">route</span><span class=\"token punctuation\">|</span><span class=\"token delimiter punctuation\">}}</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">crumbClass</span><span class=\"token delimiter punctuation\">}}</span></span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">#if</span> <span class=\"token variable\">hasBlock</span><span class=\"token delimiter punctuation\">}}</span></span>\n      <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">#if</span> <span class=\"token variable\">route</span><span class=\"token punctuation\">.</span><span class=\"token variable\">linkable</span><span class=\"token delimiter punctuation\">}}</span></span>\n        <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">#link-to</span> <span class=\"token variable\">route</span><span class=\"token punctuation\">.</span><span class=\"token variable\">path</span><span class=\"token delimiter punctuation\">}}</span></span>\n          <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">yield</span> <span class=\"token variable\">this</span> <span class=\"token variable\">route</span><span class=\"token delimiter punctuation\">}}</span></span>\n        <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">/link-to</span><span class=\"token delimiter punctuation\">}}</span></span>\n      <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">else</span><span class=\"token delimiter punctuation\">}}</span></span>\n        <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">yield</span> <span class=\"token variable\">this</span> <span class=\"token variable\">route</span><span class=\"token delimiter punctuation\">}}</span></span>\n      <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">/if</span><span class=\"token delimiter punctuation\">}}</span></span>\n    <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">else</span><span class=\"token delimiter punctuation\">}}</span></span>\n      <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">#if</span> <span class=\"token variable\">route</span><span class=\"token punctuation\">.</span><span class=\"token variable\">linkable</span><span class=\"token delimiter punctuation\">}}</span></span>\n        <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">#link-to</span> <span class=\"token variable\">route</span><span class=\"token punctuation\">.</span><span class=\"token variable\">path</span><span class=\"token delimiter punctuation\">}}</span></span>\n          <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">route</span><span class=\"token punctuation\">.</span><span class=\"token variable\">title</span><span class=\"token delimiter punctuation\">}}</span></span>\n        <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">/link-to</span><span class=\"token delimiter punctuation\">}}</span></span>\n      <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">else</span><span class=\"token delimiter punctuation\">}}</span></span>\n        <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token variable\">route</span><span class=\"token punctuation\">.</span><span class=\"token variable\">title</span><span class=\"token delimiter punctuation\">}}</span></span>\n      <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">/if</span><span class=\"token delimiter punctuation\">}}</span></span>\n    <span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">/if</span><span class=\"token delimiter punctuation\">}}</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n<span class=\"token handlebars language-handlebars\"><span class=\"token delimiter punctuation\">{{</span><span class=\"token block keyword\">/each</span><span class=\"token delimiter punctuation\">}}</span></span></code></pre></div>\n<p>And that’s done!</p>\n<h3 id=\"thanks-for-reading\" style=\"position:relative;\"><a href=\"#thanks-for-reading\" aria-label=\"thanks for reading permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Thanks for reading!</h3>\n<p>This has been yet another long post, I hope I’ve managed to explain my ideas well and maybe show you a new thing or two about Ember.</p>\n<p>Until next time,</p>\n<p><a href=\"https://twitter.com/sugarpirate_\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Lauren</a> / <a href=\"http://www.dockyard.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><em>DockYard</em></a></p>","timeToRead":9,"fields":{"slug":"/2015-06-01-declarative-breadcrumb-navigation-in-ember-js/"},"frontmatter":{"title":"Declarative Breadcrumb Navigation in Ember.js","shortDate":"June 01, 2015","longDate":"June 01, 2015, 10:48:44 pm","description":"Breadcrumb navigation isn’t a new concept, in fact, it’s usefulness has been endlessly debated about by UX designers all over. Today, I…","categories":["engineering"],"cover":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB5FozYaD/xAAZEAADAQEBAAAAAAAAAAAAAAAAARECEjH/2gAIAQEAAQUC9FnMG4670f/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAQEBAQAAAAAAAAAAAAAAAAEQAGH/2gAIAQEABj8C3YIF/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAERIWEx/9oACAEBAAE/IehjbdeDJQOQbtmMiZ//2gAMAwEAAgADAAAAEEjv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAERD/2gAIAQIBAT8QCf/EAB0QAQEAAgEFAAAAAAAAAAAAAAERACFRMUFhcYH/2gAIAQEAAT8QoldhlrIUGaKcZoyPIPscULGtgQ+cYMdG7pvP/9k=","aspectRatio":1.5,"src":"/static/ad6c414a3190fb898c660c605eac9b1b/7f945/sam-moghadam-1403544-unsplash-optimized.jpg","srcSet":"/static/ad6c414a3190fb898c660c605eac9b1b/e2788/sam-moghadam-1403544-unsplash-optimized.jpg 360w,\n/static/ad6c414a3190fb898c660c605eac9b1b/7d509/sam-moghadam-1403544-unsplash-optimized.jpg 720w,\n/static/ad6c414a3190fb898c660c605eac9b1b/7f945/sam-moghadam-1403544-unsplash-optimized.jpg 1440w,\n/static/ad6c414a3190fb898c660c605eac9b1b/47dad/sam-moghadam-1403544-unsplash-optimized.jpg 2160w,\n/static/ad6c414a3190fb898c660c605eac9b1b/af56c/sam-moghadam-1403544-unsplash-optimized.jpg 2880w,\n/static/ad6c414a3190fb898c660c605eac9b1b/6a059/sam-moghadam-1403544-unsplash-optimized.jpg 6000w","sizes":"(max-width: 1440px) 100vw, 1440px"}}},"coverAuthor":"Sam Moghadam","coverOriginalUrl":"https://unsplash.com/photos/1nP3Q9ZXcos?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText","keywords":["emberjs","breadcrumbs","ember-crumbly"],"published":true}}},"pageContext":{"slug":"/2015-06-01-declarative-breadcrumb-navigation-in-ember-js/","previous":{"fields":{"slug":"/2015-04-17-creating-an-ember-cli-addon-detecting-ember-js-components-entering-or-leaving-the-viewport/"},"frontmatter":{"title":"Creating an Ember CLI addon — Detecting Ember.js Components Entering or Leaving the Viewport"}},"next":{"fields":{"slug":"/2015-08-07-applying-the-adapter-pattern-for-analytics-in-ember-js-apps/"},"frontmatter":{"title":"Applying the Adapter Pattern for Analytics in Ember.js Apps"}}}},"staticQueryHashes":["3009088689","63159454"]}